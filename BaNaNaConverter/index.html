<!doctype html>
<html>
	<head>
		<title>BaNaNa Converter</title>
		<link rel="stylesheet" href="../css/style.css">
		<style>
			.pile-container {
    			position: relative;
    			height: 300px; /* adjust as needed */
   				width: 100%;
    			overflow: hidden;
			}
			#.banana {
   				#font-size: 30px; /* makes the emoji big */
    			#position: absolute;
    			#left: 0;
    			#top: 0;
    			#filter: drop-shadow(2px 2px 2px rgba(0,0,0,0.3));
				#animation: sway 2s infinite;
				#transition: left 1s ease-in, top 1s ease-in;
			#}
			#@keyframes sway {
				#0% { transform: rotate(0deg); }
				#25% { transform: rotate(8deg); }
				#75% { transform: rotate(-8deg); }
				#100% { transform: rotate(0deg); }
			#}
			.converter-form {
				text-align: center;
				margin-bottom: 20px;
			}
		</style>
	</head>
	<body>
		<div id="header-placeholder"></div>
		
		<h1>BaNaNa Converter</h1>

		<div class="converter-form">
			<input type="number" id="t_meter" placeholder="Enter meters">
			<button onclick="calculate()">Convert</button>
			<p>Result: <span id="result"></span></p>
		</div>	
		
		<div id="pile-container"></div>
		
		<div id="footer-placeholder"></div>	
		
		<script>
			fetch('../header.html')
				.then(response => response.text())
				.then(data => {
					document.getElementById('header-placeholder').innerHTML = data;
				});
			fetch('../footer.html')
				.then(response => response.text())
				.then(data => {
					document.getElementById('footer-placeholder').innerHTML = data;
				});
			function calculate() {
				let m = parseFloat(document.getElementById('t_meter').value);
				let resultSpan = document.getElementById('result');
				resultSpan.classList.remove('error');
				
				if (isNaN(m)) {
					resultSpan.innerText = "Please, enter a valid number";
					resultSpan.classList.add('error');
					return;		
				}
				let b = m / 0.13;
				resultSpan.innerText = b.toFixed(2);
				
				dropBananas(Math.floor(b));
			}
			
			function dropBananas(count) {
    			const pile = document.getElementById('pile-container');
    			pile.innerHTML = ''; // clear previous bananas

    			for (let i = 0; i < count; i++) {
        			const banana = document.createElement('div');
        			banana.className = 'banana';
       				banana.textContent = 'ðŸŒ';

        // Random target in pile (with some variation for pile effect)
        			const maxLeft = pile.clientWidth - 30; // adjust for emoji size
        			const startX = Math.random() * maxLeft; // near bottom
					banana.style.left = startX + 'px';
					const startY = -30 - Math.random() * 10;
					banana.style.top = startY + 'px';

					const maxTop = pile.clientHeight - 30;
					const targetY = maxTop - Math.random()*30;

					const targetX = startX + (Math.random() - 0.5) * 20;

					const duration = 0.8 + Math.random() * 1.2;
					const delay = Math.random() * 1.5;
					banana.style.transition = 'left ${duration}s ease-in ${delay}s ,top ${duration}s ease-in ${delay}s';
					
        			pile.appendChild(banana);

        // Force a reflow to ensure starting position is applied
        			banana.getBoundingClientRect();

        // Animate to target
        			banana.style.left = targetX + 'px';
        			banana.style.top = targetY + 'px';
				}
			}
		</script>
	</body>
</html>

































