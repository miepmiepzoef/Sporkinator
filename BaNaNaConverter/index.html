<!doctype html>

<html>
	<head>
		<title> BaNaNa Converter </title>
		<link rel="stylesheet" href="../css/style.css">
		<style>
			#game-area {
  				display: flex;
   				align-items: flex-end;
   				gap: 20px;
    			margin-top: 20px;
			}

			#donkey-kong {
   				width: 80px;
    			height: 100px;
    			background: brown;
   				color: white;
   				text-align: center;
   				line-height: 100px;
    			border-radius: 10px;
    			font-size: 20px;
   				position: relative;
			}

			#pile-container {
   				width: 400px;
    			height: 300px;
    			border: 2px solid #aaa;
    			background: #f0f0f0;
    			position: relative;
    			overflow: hidden;
			}
			.banana {
   				font-size: 30px; /* makes the emoji big */
    			position: absolute;
    			left: 0;
    			top: 0;
    			transition: all 1s ease-in; /* we'll animate left and top */
    			filter: drop-shadow(2px 2px 2px rgba(0,0,0,0.3));
				z-index: 10;
		</style>
	</head>
	<body>
		<h1>BaNaNa Converter</h1>
		<input type="number" id="t_meter" placeholder="Enter meters">
		<button onclick="calculate()">Convert</button>
		<p>Result: <span id="result"></span></p>

		<div id="game-area">
			<div id="donkey-kong">ü¶ç DK</div>
			<div id="pile-container"></div>
		</div>	
		<script>
			function calculate() {
				let m = parseFloat(document.getElementById('t_meter').value);
				if (isNaN(m)) {
					let resultSpan = document.getElementById('result');
					resultSpan.innerText = "Please, enter a valid number";
					resultSpan.classList.add('error');
					return;
				} else {
					resultSpan.classList.remove('error');
				}
				let b = m / 0.13;
				resultSpan.innerText = b.toFixed(2);
				throwBananas(Math.floor(m));
			}
			function throwBananas(count) {
    			const pile = document.getElementById('pile-container');
    			const dk = document.getElementById('donkey-kong');
    			pile.innerHTML = ''; // clear previous bananas
	
    // Get positions relative to the pile container
    			const pileRect = pile.getBoundingClientRect();
    			const dkRect = dk.getBoundingClientRect();

    // Calculate DK's center relative to pile container
    			const startX = dkRect.left + dkRect.width / 2 - pileRect.left;
    			const startY = dkRect.top + dkRect.height / 2 - pileRect.top;

    			for (let i = 0; i < count; i++) {
        			const banana = document.createElement('div');
        			banana.className = 'banana';
       				banana.textContent = 'üçå';

        // Random target in pile (with some variation for pile effect)
        			const targetX = Math.random() * (pile.clientWidth - 30); // adjust for emoji size
        			const targetY = (pile.clientHeight - 40) - Math.random() * 30; // near bottom

        // Set initial position (at DK)
        			banana.style.left = startX + 'px';
        			banana.style.top = startY + 'px';

        			pile.appendChild(banana);

        // Force a reflow to ensure starting position is applied
        			banana.getBoundingClientRect();

        // Animate to target
        			banana.style.left = targetX + 'px';
        			banana.style.top = targetY + 'px';
    			}
			}
		</script>
	</body>
</html>










