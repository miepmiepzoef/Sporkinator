<!doctype html>
<html>
	<head>
		<title>BaNaNa Converter</title>
		<link rel="stylesheet" href="../css/style.css">
		<style>
			#pile-container {
    			position: relative;
    			height: 50px; /* adjust as needed */
   				width: 100%;
    			overflow: hidden;
			}
			.bananas {
   				font-size: 30px; /* makes the emoji big */
    			position: absolute;
    			left: 0;
    			top: 0;
    			filter: drop-shadow(2px 2px 2px rgba(0,0,0,0.3));
				transition: left 1s ease-in, top 1s ease-in;
			}
			.converter-form {
				text-align: center;
				margin-bottom: 20px;
			}
		</style>
	</head>
	<body>
		<div id="header-placeholder"></div>
		
		<h1>BaNaNa Converter</h1>

		<div class="converter-form">
			<input type="number" id="meters" placeholder="Enter meters">
			<button onclick="calculate_meters()">Convert</button>
			<p>Result: <span id="result"></span></p>
		</div>	
		<div class="converter-form">
			<input type="number" id="meters2" placeholder="Enter meters<sup>2</sup>">
			<button onclick="calculate_meters2()">Convert</button>
			<p>Result: <span id="result2"></span></p>
		</div>	
		<div class="converter-form">
			<input type="number" id="meters3" placeholder="Enter meters<sup>3</sup>">
			<button onclick="calculate_meters3()">Convert</button>
			<p>Result: <span id="result3"></span></p>
		</div>	
		<div class="converter-form">
			<input type="number" id="kg" placeholder="Enter Kg">
			<button onclick="calculate_kg()">Convert</button>
			<p>Result: <span id="result4"></span></p>
		</div>	
		
		<div id="pile-container"></div>
		
		<div id="footer-placeholder"></div>	
		
		<script>
			fetch('../header.html')
				.then(response => response.text())
				.then(data => {
					document.getElementById('header-placeholder').innerHTML = data;
				});
			fetch('../footer.html')
				.then(response => response.text())
				.then(data => {
					document.getElementById('footer-placeholder').innerHTML = data;
				});
			function calculate_meters() {
				const length = 16.99;
				const meters = parseFloat(document.getElementById('meters').value);
				const m = meters * 100;
				
				let resultSpan = document.getElementById('result');
				resultSpan.classList.remove('error');
				
				if (isNaN(m)) {
					resultSpan.innerText = "Please, enter a valid number";
					resultSpan.classList.add('error');
					return;		
				}
				let b = m / 16.99;
				resultSpan.innerText = b.toFixed(2);
				dropBananas(Math.floor(b));
			}
			function calculate_meters2() {
				const length = 16.99;
				const width = 3.78;
				const banana = 16.99 * 3.78;
				const meters2 = parseFloat(document.getElementById('meters2').value);
				const m2 = meters2 * 10000;
				
				let	result2Span = document.getElementById('result2');
				result2Span.classList.remove('error');
				
				if (isNaN(m2)) {
					result2Span.innerText = "Please, enter a valid number";
					result2Span.classList.add('error');
					return;		
				}
				let b2 = m2 / banana;
				result2Span.innerText = b2.toFixed(2);
				dropBananas(Math.floor(b2));
			}
			function calculate_meters3() {
				const volume = 136.33;
				//const v2 = 136.33 / 100
				const meters3 = parseFloat(document.getElementById('meters3').value);
				const m3 = meters3 * 1000000;
				
				let result3Span = document.getElementById('result3');
				result3Span.classList.remove('error');
				
				if (isNaN(m3)) {
					result3Span.innerText = "Please, enter a valid number";
					result3Span.classList.add('error');
					return;		
				}
				let b3 = m3 / 136.33;
				let b3a = b3 / 100
				result3Span.innerText = b3.toFixed(2);
				dropBananas(Math.floor(b3a));
			}
			function calculate_kg() {
				const mass = 139.65;
				const kg = parseFloat(document.getElementById('kg').value);
				const kgb = kg * 1000;
				
				let	result4Span = document.getElementById('result4');
				result4Span.classList.remove('error');
				
				if (isNaN(kgb)) {
					result4Span.innerText = "Please, enter a valid number";
					result4Span.classList.add('error');
					return;		
				}
				let b4 = kgb / mass;
				result4Span.innerText = b4.toFixed(2);
				dropBananas(Math.floor(b4));
			}
			function dropBananas(count) {
    			const pile = document.getElementById('pile-container');			
				pile.innerHTML = ''; // clear previous bananas

				const containerWidth = pile.clientWidth;
				const conatinerHeight = pile.clientHeight;

    			for (let i = 0; i < count; i++) {
        			const bananas = document.createElement('div');
        			bananas.className = 'bananas';
       				bananas.textContent = 'ðŸŒ';

        // Random start x
        			const maxLeft = containerWidth - 30; // adjust for emoji size
        			const startX = Math.random() * maxLeft; 
					bananas.style.left = startX + 'px';
					
					// start above container
					const startY = -30 - Math.random() * 10;
					bananas.style.top = startY + 'px';

					const maxTop = containerHeight - 30;
					const targetY = maxTop - Math.random()* 30;
				
					const duration = 0.8 + Math.random() * 1.5;
					const delay = Math.random() * 1.5;
					
					bananas.style.transition = 'left ${duration}s ease-in ${delay}s, top ${duration}s ease-in ${delay}s';
					
        			pile.appendChild(bananas);
					
					bananas.offsetHeight;

					requestAnimationFrame(() => {
						requestAnimationFrame(() => {
							banana.style.top = targetY + 'px';
						});
					});

        // Force a reflow to ensure starting position is applied
        	
				}
			}
		</script>
	</body>
</html>





